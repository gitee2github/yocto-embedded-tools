From 28bfe4c02841e82fa67ade0665e31a2cec617f5a Mon Sep 17 00:00:00 2001
From: "beiling.xie" <xiekunxun@huawei.com>
Date: Tue, 20 Sep 2022 09:40:28 +0800
Subject: [PATCH] Adaptation for dsoftbus

Signed-off-by: beiling.xie <xiekunxun@huawei.com>
---
 base/BUILD.gn       | 21 +--------------------
 base/src/parcel.cpp |  1 +
 2 files changed, 2 insertions(+), 20 deletions(-)

diff --git a/base/BUILD.gn b/base/BUILD.gn
index 883b1ec..5785192 100644
--- a/base/BUILD.gn
+++ b/base/BUILD.gn
@@ -38,24 +38,8 @@ config("static_utils_config") {
 }
 
 sources_utils = [
-  "src/string_ex.cpp",
-  "src/unicode_ex.cpp",
-  "src/directory_ex.cpp",
-  "src/datetime_ex.cpp",
   "src/refbase.cpp",
   "src/parcel.cpp",
-  "src/semaphore_ex.cpp",
-  "src/thread_pool.cpp",
-  "src/file_ex.cpp",
-  "src/observer.cpp",
-  "src/thread_ex.cpp",
-  "src/event_demultiplexer.cpp",
-  "src/event_handler.cpp",
-  "src/event_reactor.cpp",
-  "src/timer.cpp",
-  "src/timer_event_handler.cpp",
-  "src/ashmem.cpp",
-  "src/rwlock.cpp",
 ]
 
 securec_sources = [
@@ -110,7 +94,6 @@ ohos_static_library("utilsbase") {
   ]
   public_configs = [ ":static_utils_config" ]
   defines = [ "CONFIG_HILOG" ]
-  external_deps = [ "hilog_native:libhilog_base" ]
 }
 
 ohos_shared_library("utils") {
@@ -123,8 +106,7 @@ ohos_shared_library("utils") {
   public_configs = [ ":static_utils_config" ]
   subsystem_name = "utils"
   defines = [ "CONFIG_HILOG" ]
-  external_deps = [ "hilog_native:libhilog_base" ]
-  part_name = "utils_base"
+  external_deps = [ "hiviewdfx_hilog_native:libhilog" ]
   install_images = [
     "system",
     "updater",
@@ -166,7 +148,6 @@ ohos_shared_library("utilsecurec_shared") {
     ":private_securec_config",
   ]
   public_configs = [ ":utils_config" ]
-  part_name = "utils_base"
   install_images = [
     "system",
     "updater",
diff --git a/base/src/parcel.cpp b/base/src/parcel.cpp
index 855f7cf..1abaec5 100755
--- a/base/src/parcel.cpp
+++ b/base/src/parcel.cpp
@@ -13,6 +13,7 @@
  * limitations under the License.
  */
 
+#include <climits>
 #include "parcel.h"
 #include "securec.h"
 #include "utils_log.h"
-- 
2.25.1

